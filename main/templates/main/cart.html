{% extends 'base.html' %}
{% load static %}

{% block title %}Your Cart - Candy Shop{% endblock %}

{% block content %}
<section class="cart-page cart-theme-dark">
  <h1 class="cart-title">ðŸ›’ Your Shopping Cart</h1>
  <p class="cart-intro">
    Hereâ€™s a quick overview of the treats youâ€™ve picked. You can adjust quantities, remove items, or head to checkout.
    All candies are freshly packed just for you!
  </p>

  {% if cart %}
    <div class="cart-grid">
      <!-- Cart items -->
      <ul class="cart-list" role="list">
        {% for product_id, item in cart.items %}
          <li class="cart-item">
            <div class="item-info">
              <span class="item-name">{{ item.name }}</span>
              {% if item.description %}
                <p class="item-description">{{ item.description }}</p>
              {% else %}
                <p class="item-description">Delicious and carefully selected sweets to brighten your day.</p>
              {% endif %}
              <span class="item-quantity">Quantity: {{ item.quantity }}</span>
            </div>
          </li>
        {% endfor %}
      </ul>

      <!-- Summary -->
      <aside class="cart-summary" aria-labelledby="summary-title">
        <h2 id="summary-title">Order Summary</h2>
        <p class="summary-text">Review your order before you proceed to checkout. We promise a smooth and secure payment process.</p>
        
        <p class="summary-line"><span>Total Items</span><span>{{ cart|length }}</span></p>

        <form action="{% url 'create_checkout_session' %}" method="POST" class="checkout-form">
          {% csrf_token %}
          <button type="submit" class="btn btn-primary btn-pay-card">ðŸ’³ Pay with Card</button>
        </form>

        <a href="{% url 'product_list' %}" class="btn btn-ghost btn-full">â¬… Continue Shopping</a>

        <p class="summary-note">Shipping calculated at checkout. Free shipping on orders over $50.</p>
      </aside>
    </div>

    <div class="cart-extra-info">
      <h3>Why shop with us?</h3>
      <ul>
        <li>âœ” Fresh candy made daily</li>
        <li>âœ” Secure payment with encryption</li>
        <li>âœ” 30-day happiness guarantee</li>
        <li>âœ” Worldwide delivery</li>
      </ul>
      <p class="cart-tips">Tip: Adding more items may unlock special discounts!</p>
    </div>

  {% else %}
    <div class="empty-cart">
      <div class="empty-emoji" aria-hidden="true">ðŸ§º</div>
      <h2>Your cart is empty</h2>
      <p>Looks like you havenâ€™t added anything yet. Why not browse our delicious collection?</p>
      <a class="btn btn-primary" href="{% url 'product_list' %}">Browse Candies</a>
    </div>
  {% endif %}
</section>
{% endblock %}
